import express from "express";
import { z } from "zod";
import { getAllFoods, getFoodById, createFood, updateFood, deleteFood, } from "../controllers/foods.controller.js";
import authMiddleware from "../middleware/auth.middleware.js";
import adminMiddleware from "../middleware/admin.middleware.js";
import { validate, validateParams, createFoodSchema, updateFoodSchema, mongoIdSchema, } from "../schemas/validation.schemas.js";
const router = express.Router();
router.get("/", getAllFoods);
router.get("/:foodId", validateParams(z.object({ foodId: mongoIdSchema })), getFoodById);
router.post("/", authMiddleware, adminMiddleware, validate(createFoodSchema), createFood);
router.patch("/:foodId", validateParams(z.object({ foodId: mongoIdSchema })), authMiddleware, adminMiddleware, validate(updateFoodSchema), updateFood);
router.delete("/:foodId", validateParams(z.object({ foodId: mongoIdSchema })), authMiddleware, adminMiddleware, deleteFood);
export default router;
